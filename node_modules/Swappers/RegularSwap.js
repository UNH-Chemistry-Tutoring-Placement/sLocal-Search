/**
 * Regular swapping loal search algorithm
 * @type {Swap}
 */
module.exports = Swap;

var rand = require('randomAssignment'),
    swap = require('Swappers/CoreFunctions').both,
    yargs = require('Yargs');

function Swap(){
	
    var results = [],
        timeStart = new Date().getTime(),
        timeUp = yargs.time;
    
    while((new Date().getTime() - timeStart) < timeUp){
        
        var curAssignment = rand();
        
        // the swapping will begin!
        var result = swap(curAssignment);
        
        //save the grade of this solution
        console.log("Finished", result.grade);
        if (typeof results[result.grade] === 'undefined')
            results[result.grade] = curAssignment;
        
    }

    
    for (var result in results){
        //best solution
        //console.log("the score was", result, results[result]);
        return { grade: +result, assignments: results[result] };
    }
}