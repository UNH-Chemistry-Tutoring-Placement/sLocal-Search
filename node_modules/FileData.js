module.exports.load = Load;
module.exports.get = Get;
module.exports.out = Out;

var fs = require('fs'),
	objectiveParser = require('objectiveParser'),
	classParser = require('classParser'),
	studentParser = require('studentParser'),
    args = require('Args');

var data = {};

function Load(){
    
    data.objective = objectiveParser(fs.readFileSync(args.objectiveFile || 'objective.txt', {encoding: 'utf8'}));

    data.class = classParser(fs.readFileSync(args.classFile || 'Class', {encoding: 'utf8'}));

    data.student = studentParser(fs.readFileSync(args.studentFile || 'student.txt', {encoding: 'utf8'}));
    
}

function Get() { return data; }

function Out(times){
    var out = "";
    
    out += "Solution Format: 2\n";
    out += "Objective Function: STUFF\n";
    out += "Class Info: STUFF\n";
    out += "Student Info: STUFF\n";
    out += "Number of students: " + data.student.numStudent + "\n";
    for (var time in times){
        for (var studentEmail of times[time]){
            out += data.student.students[studentEmail].name + "\n";
            out += time + "\n";
            out += data.class.groups[time].email + "\n";
        }
    }
    
    fs.writeFileSync(args.outputFile || 'solution', out);
}

